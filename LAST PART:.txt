LAST PART:

- DoViewChange, read Acolyer blog
    - oldViewNum

=== FOR BLOG ===
- belum terlalu efektif karena berurutan banget itu dari startviewchange, doviewchange, sampe startview, masih lumayan tightly coupled
- ada banyak temp variable buat next designated primary
- PrepareOK is not necessarily a reply but a replica can send it when primary is starting a new view
- still mostly use mutex and not channel
- lebih banyak passing mesage dan perubahan state walaupun "ga ada leader election" dibanding raft
- sempet stuck lama karena mau ngirim doviewchange ke diri sendiri dan stuck karena ngelock pas mau rpc tapi ya masih ada lock pas di timer 

=== NOTES ===
- cm.ElectionResetEvent = time.Now() is called in :
    - NewConsensusModule
    - RequestVote RPC
    - AppendEntries RPC
    - startElection
    - becomeFollower
- cm.runElectionTimer() is called in:
    - startElection
    - becomeFollower

=== WORKING LOG ===

20/4/2020
[ ] add time.Now() at the appropriate places
[ ] 

21/4/2020
[ ] Implementing DoViewChange and StartView as Replica State
[ ] mungkin harus diimplement di runviewtimer atau ubah2 time.now

[ ] lagi ngetrace satu-satu, sekarang di blastStartViewChange

27/4/2020
[x] Merging DoViewChange to master

29/4/2020
(?) What's lastApplied for on the eliben/raft
[ ] Work on Log replication in normal mode

30/4/2020
[ ] Continuing Log Replication, to primary's quorum
[ ] Primary's heartbeat mechanism: PREPARE
[ ] Replica's applying operation:
    [ ] PREPARE
    [ ] COMMIT
        - time (?)

NIT
{ } Primary has not change its status to Normal after "elected" and initiating VIEW-CHANGE
{ } OldViewNum should also be changed when in Normal operation, not only in VIEW-CHANGE

1/5/2020
{v} Primary has not change its status to Normal after "elected" and initiating VIEW-CHANGE

=== TO DO ===
[ ] Implementing Replica's recovery
[ ] Protocol optimisations
[ ] Replica's ViewChange recovery after partition loss